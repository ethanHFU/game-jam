[gd_scene load_steps=35 format=3 uid="uid://cgrtid77p4gyd"]

[ext_resource type="Script" uid="uid://iqhc4lyanjwq" path="res://Scripts/Controller/Main.gd" id="1_hf660"]
[ext_resource type="PackedScene" uid="uid://b3rq02pw3aj8b" path="res://Scenes/DemoScenes/basic_wave.tscn" id="2_v1pjg"]
[ext_resource type="Script" uid="uid://cpcojf2mlb0a4" path="res://Scripts/GameStateSystems/level_manager.gd" id="3_1eger"]
[ext_resource type="Script" uid="uid://7h7c2yvx0t7r" path="res://Scripts/Controller/input_controller.gd" id="3_rrces"]
[ext_resource type="Script" uid="uid://dkrm20h376m2x" path="res://Scripts/Controller/water_event_controller.gd" id="4_6bsal"]
[ext_resource type="Script" uid="uid://btfb7d3vyclnk" path="res://Scripts/Controller/canvas_controller.gd" id="5_1eger"]
[ext_resource type="Script" uid="uid://c47w15kn1oxio" path="res://Scripts/Controller/camera_controller.gd" id="6_sme2a"]
[ext_resource type="PackedScene" uid="uid://chj31s2snd6ma" path="res://Scenes/UI/pause_menu.tscn" id="6_v1pjg"]
[ext_resource type="PackedScene" uid="uid://2qs2bh3hopl5" path="res://Scenes/UI/level_ui.tscn" id="7_sme2a"]
[ext_resource type="PackedScene" uid="uid://c64cjsv4teeu8" path="res://Scenes/Boat/Boat.tscn" id="7_xo4qv"]
[ext_resource type="Material" uid="uid://did5jrj8sc7wm" path="res://Resources/Shader/water_mat.tres" id="9_4iodk"]
[ext_resource type="PackedScene" path="res://Scenes/UI/game_over.tscn" id="9_gk14i"]
[ext_resource type="PackedScene" uid="uid://bbmfs03o1here" path="res://Scenes/SpecialEffectsAndParticleSystems/Tornado.tscn" id="10_rrces"]
[ext_resource type="PackedScene" uid="uid://ccuoj71q5kdch" path="res://Scenes/SmallPrefabs/barrel.tscn" id="12_1eger"]
[ext_resource type="PackedScene" uid="uid://bbpcn3gm56ial" path="res://Scenes/SmallPrefabs/hammer.tscn" id="14_xo4qv"]
[ext_resource type="PackedScene" uid="uid://c6qf11375ilxy" path="res://Scenes/SmallPrefabs/ambrosia.tscn" id="15_yieir"]
[ext_resource type="PackedScene" uid="uid://bg6kjdframjpd" path="res://Scenes/SmallPrefabs/rock.tscn" id="17_c7mjv"]
[ext_resource type="PackedScene" uid="uid://c183d6xesnglj" path="res://Scenes/AcheronOverworld/acheron_overworld.tscn" id="18_v1pjg"]
[ext_resource type="PackedScene" uid="uid://c0lvcrcrcyr7q" path="res://Scenes/SmallPrefabs/end_trigger.tscn" id="19_gk14i"]
[ext_resource type="PackedScene" uid="uid://q20qvfs81jq1" path="res://Resources/Models/Small_Prefabs/low-poly_island_dock_platform.glb" id="20_yhygm"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_0wipk"]
sky_top_color = Color(0, 0.458139, 0.787562, 1)
sky_horizon_color = Color(0.556568, 0.712281, 0.64783, 1)
ground_bottom_color = Color(0.894118, 0.894118, 0.764706, 1)
ground_horizon_color = Color(0.550963, 0.709882, 0.678499, 1)

[sub_resource type="Sky" id="Sky_sxhid"]
sky_material = SubResource("ProceduralSkyMaterial_0wipk")

[sub_resource type="Environment" id="Environment_3sdht"]
background_mode = 2
sky = SubResource("Sky_sxhid")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="PlaneMesh" id="PlaneMesh_rrces"]
size = Vector2(5000, 400)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_yieir"]
data = PackedVector3Array(2500, 0, 200, -2500, 0, 200, 2500, 0, -200, -2500, 0, 200, -2500, 0, -200, 2500, 0, -200)

[sub_resource type="Curve" id="Curve_uuc2j"]
_data = [Vector2(0, 0), 0.0, 4.58802, 0, 0, Vector2(0.274286, 1), 0.0, 0.0, 0, 0, Vector2(0.428571, 1), 0.0, 0.0, 0, 0, Vector2(0.605714, 0), 0.0699925, 0.0, 0, 0]
point_count = 4

[sub_resource type="CurveTexture" id="CurveTexture_m86jh"]
curve = SubResource("Curve_uuc2j")

[sub_resource type="Gradient" id="Gradient_yhygm"]
offsets = PackedFloat32Array(0.00909091, 1)
colors = PackedColorArray(0.112334, 0.195345, 0.295456, 1, 0.5005, 0.84175, 0.91, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_kl4al"]
gradient = SubResource("Gradient_yhygm")
use_hdr = true

[sub_resource type="Curve" id="Curve_m86jh"]
_data = [Vector2(0, 0), 0.0, 0.279971, 0, 0, Vector2(0.509138, 0.230263), 0.0, 0.0, 0, 0, Vector2(1, 0), -0.279971, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_h3lki"]
curve = SubResource("Curve_m86jh")

[sub_resource type="Curve" id="Curve_5nkuc"]
_data = [Vector2(0, 0.505618), 0.0, 7.78828, 0, 0, Vector2(0.203655, 1), 0.0, 0.0, 0, 0, Vector2(0.804178, 1), 0.0, 0.0, 0, 0, Vector2(1, 0.467105), -7.27923, 0.0, 0, 0]
point_count = 4

[sub_resource type="CurveTexture" id="CurveTexture_uuc2j"]
curve = SubResource("Curve_5nkuc")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_kl4al"]
emission_shape = 6
emission_ring_axis = Vector3(0, -1, 0)
emission_ring_height = 1.0
emission_ring_radius = 1.0
emission_ring_inner_radius = 0.5
emission_ring_cone_angle = 60.0
angle_min = -720.0
angle_max = 720.0
inherit_velocity_ratio = 1.0
velocity_pivot = Vector3(0, 1, 0)
direction = Vector3(0, 1, 0)
spread = 90.0
initial_velocity_min = 4.0
initial_velocity_max = 5.0
radial_velocity_min = -2.23517e-05
radial_velocity_max = -2.23517e-05
gravity = Vector3(0, 8, 0)
radial_accel_min = -10.0
radial_accel_max = -7.0
tangential_accel_min = 13.0
tangential_accel_max = 18.0
damping_min = 10.0
damping_max = 10.0
scale_min = 0.5
scale_curve = SubResource("CurveTexture_uuc2j")
color = Color(0.536644, 0.517152, 0.505563, 1)
color_ramp = SubResource("GradientTexture1D_kl4al")
alpha_curve = SubResource("CurveTexture_m86jh")
hue_variation_min = -0.05
hue_variation_max = 0.05
hue_variation_curve = SubResource("CurveTexture_h3lki")
turbulence_noise_strength = 0.1
turbulence_noise_scale = 1.0

[node name="AcheronOverworld2" type="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1142.55)
script = ExtResource("1_hf660")
radial_wave_scene = ExtResource("2_v1pjg")

[node name="LevelManager" type="Node" parent="."]
script = ExtResource("3_1eger")
start_dialogue_name = "timeline"
end_dialogue_name = "EndeAcheron"

[node name="InputController" type="Node" parent="."]
script = ExtResource("3_rrces")

[node name="WaterEventController" type="Node" parent="."]
script = ExtResource("4_6bsal")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Level_UI" parent="CanvasLayer" instance=ExtResource("7_sme2a")]
z_index = -1
mouse_filter = 2

[node name="Canvas" type="Node2D" parent="CanvasLayer"]
script = ExtResource("5_1eger")

[node name="PauseMenu" parent="CanvasLayer" instance=ExtResource("6_v1pjg")]
unique_name_in_owner = true

[node name="GameOver" parent="CanvasLayer" instance=ExtResource("9_gk14i")]
unique_name_in_owner = true
visible = false

[node name="Camera3D" type="Camera3D" parent="."]
script = ExtResource("6_sme2a")
boat_path = NodePath("../Boat")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_3sdht")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.0366437, -0.865444, 0.499664, 0, 0.5, 0.866025, -0.999328, -0.0317344, 0.0183219, 0, 115.428, 13.286)
shadow_enabled = true

[node name="Boat" parent="." instance=ExtResource("7_xo4qv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 251.938, -17.816, 767.178)
collision_layer = 2
input_ray_pickable = false

[node name="Water_River" type="MeshInstance3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, -1.09672, 0, 1, 0, 1, 0, -4.79394e-08, 223.349, -24.5242, -1186.47)
material_override = ExtResource("9_4iodk")
mesh = SubResource("PlaneMesh_rrces")

[node name="StaticBody3D" type="StaticBody3D" parent="Water_River"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Water_River/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_yieir")

[node name="Obstacles" type="Node3D" parent="."]

[node name="Barrels" type="Node3D" parent="Obstacles"]

[node name="Barrel" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 234.121, -24, 296.634)
flow_strength = 1.0
phase = 1.57

[node name="Barrel2" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 120.121, -24, -576.366)

[node name="Barrel3" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 180.121, -24, -632.366)

[node name="Barrel4" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 246.121, -24, -700.366)

[node name="Barrel5" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-0.0158644, 0, -0.999874, 0, 1, 0, 0.999874, 0, -0.0158644, 276.937, -24, -1516.11)

[node name="Barrel7" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-0.0158644, 0, -0.999874, 0, 1, 0, 0.999874, 0, -0.0158644, 109.914, -24, -2236.91)
flow_strength = 0.8

[node name="Barrel10" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-0.0158644, 0, -0.999874, 0, 1, 0, 0.999874, 0, -0.0158644, 148.914, -24, -2282.91)

[node name="Barrel11" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-0.0158644, 0, -0.999874, 0, 1, 0, 0.999874, 0, -0.0158644, 167.045, -24, -2343.4)
phase = 1.57

[node name="Barrel8" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-0.0158644, 0, -0.999874, 0, 1, 0, 0.999874, 0, -0.0158644, 369.914, -24, -2236.91)
flow_strength = 0.8
phase = 3.14

[node name="Barrel9" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-0.0158644, 0, -0.999874, 0, 1, 0, 0.999874, 0, -0.0158644, 329.914, -24, -2283.62)
phase = 3.14

[node name="Barrel12" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-0.0158644, 0, -0.999874, 0, 1, 0, 0.999874, 0, -0.0158644, 307.288, -24, -2345.51)
phase = 1.57

[node name="Barrel13" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-0.0158644, 0, -0.999874, 0, 1, 0, 0.999874, 0, -0.0158644, 239.31, -24, -2345.51)
phase = 1.57

[node name="Barrel6" parent="Obstacles/Barrels" instance=ExtResource("12_1eger")]
transform = Transform3D(-0.0158644, 0, -0.999874, 0, 1, 0, 0.999874, 0, -0.0158644, 189.167, -24, -1569.26)
phase = 3.14

[node name="Hammers" type="Node3D" parent="Obstacles"]

[node name="Hammer" parent="Obstacles/Hammers" instance=ExtResource("14_xo4qv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 232.736, 0, -389.767)

[node name="Hammer2" parent="Obstacles/Hammers" instance=ExtResource("14_xo4qv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 194.736, 0, -1250.35)

[node name="Ambrosias" type="Node3D" parent="Obstacles"]

[node name="ambrosia" parent="Obstacles/Ambrosias" instance=ExtResource("15_yieir")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 236.842, -7.63501, -2115.33)

[node name="Rocks" type="Node3D" parent="Obstacles"]

[node name="Rock" parent="Obstacles/Rocks" instance=ExtResource("17_c7mjv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 147.659, -13.1148, -38.0817)

[node name="Rock2" parent="Obstacles/Rocks" instance=ExtResource("17_c7mjv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 317.659, -13.1148, 34.3832)

[node name="Rock3" parent="Obstacles/Rocks" instance=ExtResource("17_c7mjv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 233.659, -13.1148, -195.045)

[node name="Rock4" parent="Obstacles/Rocks" instance=ExtResource("17_c7mjv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 233.659, -13.1148, -1409.55)

[node name="Rock5" parent="Obstacles/Rocks" instance=ExtResource("17_c7mjv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 144.654, -13.1148, -1726.04)

[node name="Rock6" parent="Obstacles/Rocks" instance=ExtResource("17_c7mjv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 342.654, -13.1148, -1753.93)

[node name="Rock7" parent="Obstacles/Rocks" instance=ExtResource("17_c7mjv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 342.654, -13.1148, -2531.16)

[node name="Rock8" parent="Obstacles/Rocks" instance=ExtResource("17_c7mjv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 117.948, -13.1148, -2479.55)

[node name="AcheronOverworld" parent="." instance=ExtResource("18_v1pjg")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, -4.57697, 584.986)

[node name="AcheronOverworld2" parent="." instance=ExtResource("18_v1pjg")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 3.335, -4.57697, -735.603)

[node name="AcheronOverworld3" parent="." instance=ExtResource("18_v1pjg")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 13.225, -4.57697, -2067.32)

[node name="AcheronOverworld4" parent="." instance=ExtResource("18_v1pjg")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 24.915, -4.57697, -3430.19)

[node name="End_trigger" parent="." instance=ExtResource("19_gk14i")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 209.762, 0, -2857.58)

[node name="Sketchfab_Scene" parent="End_trigger" instance=ExtResource("20_yhygm")]
transform = Transform3D(-3.49691e-07, 0, -8, 0, 8, 0, 8, 0, -3.49691e-07, -91.374, -17.328, -102.493)

[node name="pepito_tornada2" parent="." instance=ExtResource("10_rrces")]
transform = Transform3D(-25, 0, -3.7749e-06, 0, 25, 0, 3.7749e-06, 0, -25, 221.549, -24.5242, 1040.05)
process_material = SubResource("ParticleProcessMaterial_kl4al")
use_this_feature = true
speed = 100.0
stop_point = -2300.0

[editable path="CanvasLayer/Level_UI"]
